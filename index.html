<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìº£íˆì–´ë¡œ : ë¼ì„ ê¸¸ë“œ ê°€ì´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Noto Sans KR', 'sans-serif'],
                        display: ['Black Han Sans', 'sans-serif'],
                    },
                    colors: {
                        brand: { 50: '#f0fdf4', 400: '#4ade80', 500: '#22c55e', 600: '#16a34a' },
                    },
                    animation: { 'bounce-slight': 'bounce-slight 0.5s infinite' },
                    keyframes: { 'bounce-slight': { '0%, 100%': { transform: 'translateY(-5%)' }, '50%': { transform: 'translateY(0)' } } }
                }
            }
        }
    </script>
    <style>
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .bg-pattern { background-color: #f8fafc; background-image: radial-gradient(#cbd5e1 1px, transparent 1px); background-size: 24px 24px; }
        .dark .bg-pattern { background-color: #0f172a; background-image: radial-gradient(#334155 1px, transparent 1px); }
        .glass-card { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.6); }
        .dark .glass-card { background: rgba(30, 41, 59, 0.85); border: 1px solid rgba(255, 255, 255, 0.1); }
        .sidebar-active { background: rgba(34, 197, 94, 0.1); color: #16a34a; border-right: 3px solid #16a34a; }
        .dark .sidebar-active { background: rgba(74, 222, 128, 0.1); color: #4ade80; border-right: 3px solid #4ade80; }
        #login-overlay { position: fixed; inset: 0; background: #111827; z-index: 9999; display: flex; align-items: center; justify-content: center; }
        #loader { position: fixed; inset: 0; background: white; z-index: 9998; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: opacity 0.5s; }
        .dark #loader { background: #0f172a; }
    </style>
</head>
<body class="bg-pattern min-h-screen text-gray-800 transition-colors duration-300 dark:text-gray-100 font-sans overflow-x-hidden">

    <!-- DATA LOADING OVERLAY -->
    <div id="loader">
        <div class="w-16 h-16 border-4 border-brand-500 border-t-transparent rounded-full animate-spin mb-4"></div>
        <p class="font-display text-xl animate-pulse">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        <p id="error-hint" class="hidden mt-4 text-red-500 text-sm text-center px-4">
            ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.<br>ê¹ƒí—ˆë¸Œ ì£¼ì†Œê°€ ì •í™•í•œì§€, JSON í˜•ì‹ì´ ë§ëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.
        </p>
    </div>

    <!-- PASSWORD LOGIN OVERLAY -->
    <div id="login-overlay" class="hidden">
        <div class="glass-card p-8 rounded-3xl w-full max-w-sm text-center shadow-2xl mx-4">
            <h2 class="text-xl font-display text-white mb-6 tracking-wide">ğŸ”’ [ë¼ì„] ê¸¸ë“œì› ì „ìš© ê³µê°„</h2>
            <input type="text" id="password-input" placeholder="ì•”í˜¸ ì…ë ¥" class="w-full bg-gray-900 border border-gray-600 rounded-lg py-3 px-4 text-white text-center mb-4 outline-none focus:border-brand-500">
            <button onclick="checkPassword()" class="w-full bg-brand-500 hover:bg-brand-600 text-white font-bold py-3 rounded-lg transition active:scale-95">ì…ì¥í•˜ê¸°</button>
            <p id="login-msg" class="text-brand-400 text-xs mt-3 h-4 font-bold"></p>
        </div>
    </div>

    <!-- PC SIDEBAR -->
    <aside class="hidden md:flex fixed top-0 left-0 h-full w-64 glass-card flex-col z-50">
        <div class="p-6 flex items-center gap-3 cursor-pointer" onclick="goHome()">
            <div class="w-10 h-10 rounded-xl bg-brand-500 flex items-center justify-center text-white shadow-lg"><i class="fas fa-cat text-xl"></i></div>
            <div class="font-display text-xl">CAT HERO</div>
        </div>
        <nav class="flex-1 px-4 space-y-2 mt-4 overflow-y-auto scrollbar-hide">
            <button onclick="openSection('home-screen')" class="sidebar-btn w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition flex items-center gap-3 sidebar-active" data-target="home-screen"><i class="fas fa-home w-6"></i> í™ˆ</button>
            <button onclick="openSection('schedule')" class="sidebar-btn w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition flex items-center gap-3" data-target="schedule"><i class="fas fa-calendar-alt w-6"></i> ì¼ì • & ë¯¸ì…˜</button>
            <button onclick="openSection('growth')" class="sidebar-btn w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition flex items-center gap-3" data-target="growth"><i class="fas fa-chart-line w-6"></i> ì„±ì¥ & VIP</button>
            <button onclick="openSection('deck')" class="sidebar-btn w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition flex items-center gap-3" data-target="deck"><i class="fas fa-layer-group w-6"></i> ë± ë„ê°</button>
            <button onclick="openSection('calculator')" class="sidebar-btn w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition flex items-center gap-3" data-target="calculator"><i class="fas fa-calculator w-6"></i> ê³„ì‚°ê¸°</button>
        </nav>
    </aside>

    <!-- MOBILE HEADER -->
    <header class="md:hidden fixed top-0 w-full z-50 glass-card h-16 flex items-center justify-between px-5">
        <div class="flex items-center gap-3" onclick="goHome()">
            <div class="w-9 h-9 rounded-lg bg-brand-500 flex items-center justify-center text-white"><i class="fas fa-cat"></i></div>
            <span class="font-display text-lg">CAT HERO</span>
        </div>
        <button id="mobile-theme-toggle" class="w-9 h-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center"><i class="fas fa-moon"></i></button>
    </header>

    <!-- MAIN CONTENT -->
    <main class="pt-20 pb-24 md:pb-10 md:pt-10 md:pl-72 px-4 md:pr-10 w-full max-w-7xl mx-auto relative z-10 min-h-screen">
        
        <!-- HOME -->
        <section id="home-screen" class="page-enter">
            <div class="py-10 flex flex-col md:flex-row items-center gap-6">
                <div class="w-24 h-24 md:w-32 md:h-32 rounded-full overflow-hidden border-4 border-white shadow-xl animate-bounce-slight bg-yellow-100 flex items-center justify-center">
                    <i class="fas fa-paw text-4xl text-yellow-500"></i>
                </div>
                <div class="text-center md:text-left">
                    <h1 class="text-2xl md:text-4xl font-display mb-2">í™˜ì˜í•©ë‹ˆë‹¤!<br><span class="text-brand-500">ë¼ì„ ê¸¸ë“œ ì „ìš©</span> ê³µëµì§‘</h1>
                    <p class="text-gray-500 text-sm">ê¹ƒí—ˆë¸Œ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜í•©ë‹ˆë‹¤.</p>
                </div>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-6">
                <button onclick="openSection('schedule')" class="glass-card p-6 rounded-3xl flex flex-col items-center gap-3 border-t-4 border-blue-500"><i class="fas fa-calendar-alt text-3xl text-blue-500"></i><span class="font-bold">ì¼ì • & ë¯¸ì…˜</span></button>
                <button onclick="openSection('growth')" class="glass-card p-6 rounded-3xl flex flex-col items-center gap-3 border-t-4 border-yellow-500"><i class="fas fa-chart-line text-3xl text-yellow-500"></i><span class="font-bold">ì„±ì¥ & VIP</span></button>
                <button onclick="openSection('deck')" class="glass-card p-6 rounded-3xl flex flex-col items-center gap-3 border-t-4 border-green-500"><i class="fas fa-layer-group text-3xl text-green-500"></i><span class="font-bold">ë± ë„ê°</span></button>
                <button onclick="openSection('calculator')" class="glass-card p-6 rounded-3xl flex flex-col items-center gap-3 border-t-4 border-indigo-500"><i class="fas fa-calculator text-3xl text-indigo-500"></i><span class="font-bold">ê²©ì¶” ê³„ì‚°ê¸°</span></button>
            </div>
        </section>

        <!-- SCHEDULE -->
        <section id="schedule" class="hidden">
            <h2 class="text-3xl font-display mb-6">ì¼ì • ë° ë¯¸ì…˜</h2>
            <div id="schedule-content" class="grid grid-cols-1 lg:grid-cols-2 gap-6"></div>
        </section>

        <!-- GROWTH -->
        <section id="growth" class="hidden">
            <h2 class="text-3xl font-display mb-6">ì„±ì¥ & VIP</h2>
            <div class="glass-card p-6 rounded-3xl overflow-hidden mb-6">
                <h3 class="font-bold text-lg mb-4 text-brand-600">VIP ë“±ê¸‰ í˜œíƒ</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead class="bg-gray-100 dark:bg-gray-800">
                            <tr><th class="px-3 py-2 text-left">ë“±ê¸‰</th><th class="px-3 py-2 text-left">ê¸ˆì•¡</th><th class="px-3 py-2 text-left">í˜œíƒ</th></tr>
                        </thead>
                        <tbody id="vip-table-body" class="divide-y divide-gray-100 dark:divide-gray-700"></tbody>
                    </table>
                </div>
            </div>
            <div class="glass-card p-6 rounded-3xl">
                <h3 class="font-bold mb-4">ë ˆë²¨ë³„ ë…¹í„´ ë³´ìƒ</h3>
                <div class="h-64 overflow-y-auto custom-scrollbar" id="nocturne-list"></div>
            </div>
        </section>

        <!-- DECK -->
        <section id="deck" class="hidden">
            <h2 class="text-3xl font-display mb-6">ìµœê°• ë± ë„ê°</h2>
            <div id="deck-container" class="space-y-8"></div>
        </section>

        <!-- CALCULATOR -->
        <section id="calculator" class="hidden">
            <h2 class="text-3xl font-display mb-6">ê²©ì¶” ì ìˆ˜ ê³„ì‚°ê¸°</h2>
            <div class="max-w-md mx-auto glass-card p-8 rounded-3xl shadow-xl">
                <label class="block mb-2 font-bold">ê²©ì¶”ìœ¨ ì…ë ¥ (%)</label>
                <input type="number" id="calc-percent" oninput="updateCalc()" placeholder="ì˜ˆ: 40" class="w-full bg-gray-50 dark:bg-gray-900 border rounded-xl py-4 px-4 text-2xl text-center outline-none">
                <div class="mt-6 bg-gray-900 rounded-xl p-6 text-center text-white">
                    <p class="text-gray-400 text-xs mb-1">ì˜ˆìƒ ì ìˆ˜</p>
                    <div id="calc-result" class="text-4xl font-bold">85,500 ì </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        /**
         * 1. ë°ì´í„° ì„¤ì • (ë§¤ìš° ì¤‘ìš”!)
         * ê¹ƒí—ˆë¸Œì˜ raw íŒŒì¼ ì£¼ì†Œë¥¼ ì—¬ê¸°ì— ì…ë ¥í•˜ì„¸ìš”.
         * ì£¼ì†Œ í˜•ì‹ ì˜ˆ: https://raw.githubusercontent.com/ì‚¬ìš©ìëª…/ë ˆí¬ëª…/main/data.json
         */
        const GITHUB_JSON_URL = "https://raw.githubusercontent.com/your-username/your-repo/main/data.json"; 
        
        let GAME_DATA = null;

        /**
         * 2. ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ë¡œì§
         */
        async function fetchGameData() {
            try {
                // 1. ê¹ƒí—ˆë¸Œì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹œë„
                const response = await fetch(GITHUB_JSON_URL);
                if (!response.ok) throw new Error("Fetch failed");
                GAME_DATA = await response.json();
                
                initSite(); // ì‚¬ì´íŠ¸ ì´ˆê¸°í™”
            } catch (err) {
                console.warn("External data failed. Using internal fallback for demo.");
                document.getElementById('error-hint').classList.remove('hidden');
                
                // [ì„ íƒ ì‚¬í•­] ê¹ƒí—ˆë¸Œ ì—°ë™ ì‹¤íŒ¨ ì‹œ ë³´ì—¬ì¤„ ì„ì‹œ ë¡œì»¬ ë°ì´í„° (í…ŒìŠ¤íŠ¸ìš©)
                GAME_DATA = { 
                    vipBenefits: [{grade:"ê´‘ê³ ì œê±°", total:"9,900", benefits:"ê´‘ê³ ì œê±°"}],
                    decks: { myth1: [{title:"ê³ ì–‘ì´ ë±", members:"ë©¤ë²„ ì •ë³´", runes:"ë£¬ ì •ë³´", desc:"ì„¤ëª…"}] },
                    nocturneRewards: [{lv:1, r:"ë™ë£Œë½‘ 600"}],
                    synthesisMissions: { generalRunes: ["í•©ì„± ë¯¸ì…˜ 1"] }
                };
                setTimeout(initSite, 1500);
            }
        }

        function initSite() {
            renderVIP();
            renderDecks();
            renderNocturne();
            renderSchedule();
            
            // ë¡œë”© í™”ë©´ ì œê±° ë° ë¡œê·¸ì¸ í™”ë©´ í‘œì‹œ
            document.getElementById('loader').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                if (!sessionStorage.isLoggedIn) {
                    document.getElementById('login-overlay').classList.remove('hidden');
                }
            }, 500);
        }

        /**
         * 3. ë Œë”ë§ í•¨ìˆ˜ë“¤
         */
        function renderVIP() {
            const tbody = document.getElementById('vip-table-body');
            tbody.innerHTML = (GAME_DATA.vipBenefits || []).map(v => `
                <tr class="${v.highlight ? 'bg-brand-50/50 dark:bg-brand-900/10' : ''}">
                    <td class="px-3 py-3 font-bold">${v.grade}</td>
                    <td class="px-3 py-3 text-brand-600">${v.total}ì›</td>
                    <td class="px-3 py-3 text-xs text-gray-500">${v.benefits}</td>
                </tr>
            `).join('');
        }

        function renderDecks() {
            const container = document.getElementById('deck-container');
            const sections = { myth1: '1ì‹ í™”', myth2: '2ì‹ í™”', myth3: '3ì‹ í™”' };
            
            for (let id in sections) {
                const decks = GAME_DATA.decks?.[id] || [];
                const sectionHtml = `
                    <div class="mb-10">
                        <h3 class="font-bold text-xl mb-4 border-l-4 border-blue-500 pl-3">${sections[id]} ì¶”ì²œ ì¡°í•©</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${decks.map(d => `
                                <div class="glass-card p-5 rounded-2xl">
                                    <h4 class="font-bold text-lg mb-2">${d.title}</h4>
                                    <div class="text-xs space-y-1 bg-gray-50 dark:bg-black/20 p-3 rounded-lg mb-2">
                                        <p><strong>ë©¤ë²„:</strong> ${d.members}</p>
                                        <p><strong>ë£¬:</strong> ${d.runes}</p>
                                    </div>
                                    <p class="text-xs italic text-gray-400">"${d.desc}"</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML += sectionHtml;
            }
        }

        function renderNocturne() {
            const list = document.getElementById('nocturne-list');
            list.innerHTML = (GAME_DATA.nocturneRewards || []).map(n => `
                <div class="flex justify-between py-2 border-b border-gray-100 dark:border-gray-800 text-sm">
                    <span class="font-mono text-brand-500 font-bold">Lv.${n.lv}</span>
                    <span>${n.r}</span>
                </div>
            `).join('');
        }

        function renderSchedule() {
            const container = document.getElementById('schedule-content');
            const missions = GAME_DATA.synthesisMissions || {};
            container.innerHTML = `
                <div class="glass-card p-6 rounded-3xl">
                    <h3 class="font-bold text-lg mb-4 text-blue-600"><i class="fas fa-gem mr-2"></i>í•©ì„± ë¯¸ì…˜ ë¦¬ìŠ¤íŠ¸</h3>
                    <ul class="space-y-2 text-sm">
                        ${(missions.generalRunes || []).map(m => `<li>â€¢ ${m}</li>`).join('')}
                    </ul>
                </div>
            `;
        }

        /**
         * 4. ì¸í„°ë™ì…˜ ë¡œì§
         */
        function checkPassword() {
            const input = document.getElementById('password-input').value;
            if (input === 'ë¼ì„ ìµœê³ ') { 
                document.getElementById('login-overlay').style.display = 'none';
                sessionStorage.isLoggedIn = 'true';
            } else {
                document.getElementById('login-msg').innerText = 'ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.';
            }
        }

        function openSection(id) {
            document.querySelectorAll('main > section').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            document.querySelectorAll('.sidebar-btn').forEach(b => {
                b.classList.toggle('sidebar-active', b.dataset.target === id);
            });
            window.scrollTo(0, 0);
        }

        function updateCalc() {
            const val = parseFloat(document.getElementById('calc-percent').value);
            const score = isNaN(val) ? 85500 : (val * 300) + 85500;
            document.getElementById('calc-result').innerText = score.toLocaleString() + " ì ";
        }

        function goHome() { openSection('home-screen'); }

        // í…Œë§ˆ í† ê¸€
        document.getElementById('mobile-theme-toggle').onclick = () => {
            document.documentElement.classList.toggle('dark');
        };

        // ë°ì´í„° ë¡œë“œ ì‹œì‘
        window.onload = fetchGameData;
    </script>
</body>
</html>
